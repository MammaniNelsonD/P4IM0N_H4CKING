# üï∏Ô∏è DAILY BUGLE

Comprometa una cuenta de Joomla CMS a trav√©s de SQLi, practique descifrar hashes y aumente sus privilegios aprovechando yum.

Primero, cuando empec√© a investigar la m√°quina Dayli Bugle, decid√≠ realizar una exploraci√≥n de puertos para ver qu√© servicios estaban disponibles. Utilic√© nmap para esto.

Luego, not√© que hab√≠a un servidor web ejecut√°ndose en la m√°quina, as√≠ que acced√≠ al puerto HTTP para ver qu√© encontraba. Ah√≠ me top√© con la p√°gina del Daily Bugle.

Curioseando un poco, me encontr√© con una pregunta intrigante en la p√°gina web: "¬øQui√©n rob√≥ el banco?". Despu√©s de un poco de reflexi√≥n, record√© la referencia al spiderman en la foto de Daily Bugle, as√≠ que escrib√≠ "spiderman" como respuesta y, ¬°bingo!, me dej√≥ pasar.

Una vez dentro, empec√© a explorar el servidor web y encontr√© con gobuster un directorio llamado /administrator. Pens√© que podr√≠a haber algo interesante all√≠, as√≠ que entr√© y me encontr√© con una p√°gina de inicio de sesi√≥n que parec√≠a ser del sistema de gesti√≥n de contenidos Joomla CMS.

Despu√©s de un r√°pido vistazo a la documentaci√≥n de Joomla, usando mi herramienta en python P4Iversionjoomla.py y manualmente descubr√≠ que la versi√≥n del CMS era 3.7.0. Esto era crucial porque sab√≠a que las versiones antiguas de Joomla ten√≠an vulnerabilidades conocidas.

Buscando en Exploit-DB, searchsploit y github, encontr√© un exploit para Joomla! con esa versi√≥n espec√≠fica. Intent√© seguir las instrucciones del exploit, pero parece que no obtuve los resultados esperados.

Decid√≠ intentar la enumeraci√≥n con sqlmap para ver si pod√≠a encontrar alguna vulnerabilidad m√°s f√°cilmente. Despu√©s de unos minutos de espera, sqlmap me mostr√≥ algunas bases de datos interesantes y demas datos.

Descargu√© un archivo Python de un exploit para joomla 3.7 que parec√≠a ser √∫til para obtener un hash de contrase√±a. Lo ejecut√© y obtuve el hash de la contrase√±a de un usuario jonah que necesitaba para el panel de administrator de joomla. Investigando un poco m√°s, descubr√≠ que el hash estaba en formato bcrypt.

Utilic√© John the Ripper y tambien Hashcat para descifrar el hash y finalmente obtuve la contrase√±a: "spiderman123" encontrandola mas rapido con Jonh, ya gpt nos habia dichio que era un cifrado fuerte Bcrypt, pero lo logramos y se tenzo.

Con las credenciales de acceso, inici√© sesi√≥n en el panel de administraci√≥n y, sorprendentemente, ¬°funcion√≥! Ten√≠a acceso completo como super usuario.

Ahora que ten√≠a acceso, decid√≠ buscar una forma de obtener una shell inversa. Modifiqu√© el archivo index.php de la plantilla para incluir un shell inverso php que creee con msfvenom para una sesion de meterpreter para escuchar con multihandler de metasploit y tambien me cree un reverse shell php con la extension hacktools, y despu√©s de configurar metasploit escuchando con multihandler y el payload de meterpreter, y el oyente netcat en mi m√°quina, ¬°logr√© obtener acceso a las shell en ambas opciones para probar tambien con los comandos especiales de meterpreter y modulos postexplotacion!

Una vez dentro, comenc√© a buscar archivos interesantes y encontr√© un archivo llamado configuration.php que ya lo habia visto antes y hasta probe conectarme antes por mysql con las credenciales que figuraban como root pero no habia funcionado, lo encontre en var/www/html. Al abrirlo, encontr√© la contrase√±a de root pero como dije para mysql no funciono, ni por ssh.

Sin embargo, al intentar iniciar sesi√≥n como root, no tuve √©xito. Pero luego, intent√© con el nombre de usuario "jjameson" por SSH con el passwd del archivo configuration.php que encontramos y, ¬°lo logr√©! Ten√≠a acceso con √©xito con este usuario distinto a el usuario qeu nos daban las shells que era apache el cual no funciono realizando los pasos de escalada de privilegios por falta de permisos.

Busqu√© un poco m√°s y encontr√© la primera bandera de usuario jjameson

Intent√© escalar privilegios accediendo a sudo, pero lamentablemente no funcion√≥. Despu√©s de investigar un poco m√°s, encontr√© nuevamente  una forma de escalar privilegios usando "yum" en la pagina de GTFObins para conseguir una shell raiz y la volvi a probar ahora como el usuario jjameson.

Siguiendo los pasos de la documentaci√≥n, ¬°obtuve acceso de root! Ahora ten√≠a control total sobre la m√°quina.

Busqu√© archivos interesantes una vez m√°s y encontr√© la √∫ltima bandera de root. ¬°Misi√≥n cumplida!



{% file src="../../.gitbook/assets/pentestingofensivoBUGLEDIARIO" %}
